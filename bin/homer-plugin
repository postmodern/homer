#!/bin/zsh
#
# Install a shell plugin with Antigen, and save it in the
# ~/etc/plugins file.

pushd $HOME

let cmd=$1
let file=$HOME/etc/plugins
let plugin=$2

# Process the command
case "$cmd" in
  install)
    if [[ -z $plugin ]]; then;
      echo "error: you must specify a plugin name"
      return
    fi
    antigen bundle $plugin
    echo "antigen bundle $plugin" >> $file
    ;;
  uninstall)
    if [[ -z $plugin ]]; then;
      echo "error: you must specify a plugin name"
      return
    fi
    sed "/antigen bundle $plugin/,/" $file
    ;;
  *)
    echo "Usage: homer plugin [install|uninstall] PLUGIN_NAME"
    return
    ;;
esac

git commit $file -m "Added shell plugin '$plugin'"

popd
