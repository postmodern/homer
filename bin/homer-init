#!/bin/zsh
#
# Copy home directory template files to the user's home directory and
# initialize it as a Git repository.

if [[ -e "$HOME/.git" ]]; then;
  echo "There is already an existing repo in your home dir."
  exit 0
fi

zparseopts -K -- m:=message c:=repository

if [[ -z $repository ]]; then
  git clone $repository /tmp/home-directory
  cp -a /tmp/home-directory/** $HOME
  cp -a /tmp/home-directory/.* $HOME
else
  git init $HOME
  cp -a $HOMER_PATH/share/homer/template/** $HOME
  cp -a $HOMER_PATH/share/homer/template/.* $HOME
  homer_commit_all "Initialize home directory."
fi

